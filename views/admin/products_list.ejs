<%- include('navbar') %>
<div class="container mt-4">
    <h2 class="mb-4">Manage Products</h2>

    <!-- Category Filter -->
    <select id="categoryFilter" class="form-select w-auto mb-3">
        <option value="">All Categories</option>
        <option value="Mobile">Mobile</option>
        <option value="Watches">Watches</option>
        <option value="Headphones">Headphones</option>
    </select>

    <table class="table table-bordered table-striped" id="productsTable">
        <thead class="table-dark">
            <tr>
                <th>Image</th>
                <th>Name</th>
                <th>Price</th>
                <th>Category</th>
                <th>Status</th>
                <th width="250">Actions</th>
            </tr>
        </thead>
        <tbody>
            <% for (var i = 0; i < products.length; i++) { %>
                <tr>
                    <td><img src="/uploads/<%= products[i].image %>" width="60"></td>
                    <td><%= products[i].name %></td>
                    <td>â‚¹<%= products[i].price %></td>
                    <td class="product-category"><%= products[i].category %></td>
                    <td><%= products[i].status %></td>
                    <td>
                        <% if (products[i].status === 'Active') { %>
                            <a href="/admin/products_delete/<%= products[i].id %>" class="btn btn-danger btn-sm">Delete</a>
                        <% } else { %>
                            <a href="/admin/products_activate/<%= products[i].id %>" class="btn btn-success btn-sm">Activate</a>
                        <% } %>
                    </td>
                </tr>
            <% } %>
        </tbody>
    </table>
</div>

<script>
document.getElementById("categoryFilter").addEventListener("change", function() {
    var selectedCategory = this.value.toLowerCase();
    var rows = document.querySelectorAll("#productsTable tbody tr");

    rows.forEach(function(row) {
        var category = row.querySelector(".product-category").textContent.toLowerCase();
        
        if (selectedCategory === "" || category === selectedCategory) {
            row.style.display = "";
        } else {
            row.style.display = "none";
        }
    });
});
</script>
<%- include('footer') %>
